"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=!1;function t(e){return e.returnValue="You have unsaved changes that may be lost.","You have unsaved changes that may be lost."}function n(e){var t=document.createElement("div");t.className="modal is-active";var n=e.contextualColorName||"info",a=e.titleString||"",o=e.bodyHTML||"",s=e.cancelButtonHTML||"Cancel",i=e.okButtonHTML||"OK";t.innerHTML='<div class="modal-background"></div><div class="modal-content"><div class="message is-'+n+'"><header class="message-header"><span class="is-size-5"></span></header><section class="message-body">'+(""===o?"":'<div class="mb-4">'+o+"</div>")+'<div class="buttons justify-flex-end">'+(e.hideCancelButton?"":'<button class="button is-cancel-button" type="button" aria-label="Cancel">'+s+"</button>")+'<button class="button is-ok-button is-'+n+'" type="button" aria-label="OK">'+i+"</button></div></section></div></div>",t.getElementsByClassName("message-header")[0].getElementsByTagName("span")[0].innerText=a,e.hideCancelButton||t.getElementsByClassName("is-cancel-button")[0].addEventListener("click",function(){t.remove()});var c=t.getElementsByClassName("is-ok-button")[0];c.addEventListener("click",function(){t.remove(),e.callbackFn&&e.callbackFn()}),document.body.insertAdjacentElement("beforeend",t),c.focus()}var a={clearElement:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},escapeHTML:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},dateToString:function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},dateStringToDate:function(e){var t=e.split("-");return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]),0,0,0,0)},dateStringDifferenceInDays:function(e,t){var n=a.dateStringToDate(e),o=a.dateStringToDate(t);return Math.round((o.getTime()-n.getTime())/864e5)},responseToJSON:function(e){return e.json()},postJSON:function(e,t,n){var o={method:"POST",credentials:"include"};if(t)if(t instanceof HTMLFormElement){var s=t;s.querySelector("input[name][type='file']")?o.body=new FormData(s):o.body=new URLSearchParams(new FormData(s))}else t instanceof Object&&(o.headers={"Content-Type":"application/json"},o.body=JSON.stringify(t));window.fetch(e,o).then(a.responseToJSON).then(n)},showModal:function(e){e.classList.add("is-active")},hideModal:function(e){var t=e;t instanceof Event&&(t=e.currentTarget),(t.classList.contains("modal")?t:t.closest(".modal")).classList.remove("is-active")},openHtmlModal:function(e,t){window.fetch("/html/"+e+".html").then(function(e){return e.text()}).then(function(e){var n=document.createElement("div");n.innerHTML=e;var a=n.getElementsByClassName("modal")[0];document.body.insertAdjacentElement("beforeend",n),t&&t.onshow&&t.onshow(a),a.classList.add("is-active");var o=function(){var e=a.classList.contains("is-active");if(t&&t.onhide&&e&&t.onhide(a))return;a.classList.remove("is-active"),t&&t.onhidden&&e&&t.onhidden(a),n.remove(),t&&t.onremoved&&t.onremoved()};t&&t.onshown&&t.onshown(a,o);for(var s=a.getElementsByClassName("is-close-modal-button"),i=0;i<s.length;i+=1)s[i].addEventListener("click",o)})},enableNavBlocker:function(){e||(window.addEventListener("beforeunload",t),e=!0)},disableNavBlocker:function(){e&&(window.removeEventListener("beforeunload",t),e=!1)},confirmModal:function(e,t,a,o,s){n({contextualColorName:o,titleString:e,bodyHTML:t,okButtonHTML:a,callbackFn:s})},alertModal:function(e,t,a,o){n({contextualColorName:o,titleString:e,bodyHTML:t,hideCancelButton:!0,okButtonHTML:a})}};window.cityssm=window.cityssm||a}();