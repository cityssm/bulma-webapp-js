"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{let e=!1;const t=e=>{return e.returnValue="You have unsaved changes that may be lost.","You have unsaved changes that may be lost."},n=e=>{const t=document.createElement("div");t.className="modal is-active";const n=e.contextualColorName||"info",o=e.titleString||"",s=e.bodyHTML||"",a=e.cancelButtonHTML||"Cancel",i=e.okButtonHTML||"OK";t.innerHTML='<div class="modal-background"></div><div class="modal-content"><div class="message is-'+n+'"><header class="message-header"><span class="is-size-5"></span></header><section class="message-body">'+(""===s?"":'<div class="mb-4">'+s+"</div>")+'<div class="buttons is-block has-text-right">'+(e.hideCancelButton?"":'<button class="button is-cancel-button" type="button" aria-label="Cancel">'+a+"</button>")+'<button class="button is-ok-button is-'+n+'" type="button" aria-label="OK">'+i+"</button></div></section></div></div>",t.getElementsByClassName("message-header")[0].getElementsByTagName("span")[0].innerText=o,e.hideCancelButton||t.getElementsByClassName("is-cancel-button")[0].addEventListener("click",()=>{t.remove()});const l=t.getElementsByClassName("is-ok-button")[0];l.addEventListener("click",()=>{t.remove(),e.callbackFn&&e.callbackFn()}),document.body.insertAdjacentElement("beforeend",t),l.focus()},o=document.querySelector("meta[name='csrf-token']").getAttribute("content"),s={clearElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)},escapeHTML:e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),dateToString:e=>e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),dateStringToDate(e){const t=e.split("-");return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10),0,0,0,0)},dateStringDifferenceInDays(e,t){const n=s.dateStringToDate(e),o=s.dateStringToDate(t);return Math.round((o.getTime()-n.getTime())/864e5)},responseToJSON:e=>e.json(),postJSON(e,t,n){const a={method:"POST",credentials:"same-origin",headers:{"CSRF-Token":o}};if(t)if(t instanceof HTMLFormElement){const e=t;e.querySelector("input[name][type='file']")?a.body=new FormData(e):a.body=new URLSearchParams(new FormData(e))}else t instanceof Object&&(a.headers["Content-Type"]="application/json",a.body=JSON.stringify(t));window.fetch(e,a).then(s.responseToJSON).then(n)},showModal(e){e.classList.add("is-active")},hideModal(e){let t=e;t instanceof Event&&(t=e.currentTarget),(t.classList.contains("modal")?t:t.closest(".modal")).classList.remove("is-active")},openHtmlModal(e,t){window.fetch("/html/"+e+".html").then(e=>e.text()).then(e=>{const n=document.createElement("div");n.innerHTML=e;const o=n.getElementsByClassName("modal")[0];document.body.insertAdjacentElement("beforeend",n),t&&t.onshow&&t.onshow(o),o.classList.add("is-active");const s=()=>{const e=o.classList.contains("is-active");if(t&&t.onhide&&e){if(t.onhide(o))return}o.classList.remove("is-active"),t&&t.onhidden&&e&&t.onhidden(o),n.remove(),t&&t.onremoved&&t.onremoved()};t&&t.onshown&&t.onshown(o,s);const a=o.getElementsByClassName("is-close-modal-button");for(const e of a)e.addEventListener("click",s)})},enableNavBlocker(){e||(window.addEventListener("beforeunload",t),e=!0)},disableNavBlocker(){e&&(window.removeEventListener("beforeunload",t),e=!1)},confirmModal(e,t,o,s,a){n({contextualColorName:s,titleString:e,bodyHTML:t,okButtonHTML:o,callbackFn:a})},alertModal(e,t,o,s){n({contextualColorName:s,titleString:e,bodyHTML:t,hideCancelButton:!0,okButtonHTML:o})}};window.cityssm=window.cityssm||s})();